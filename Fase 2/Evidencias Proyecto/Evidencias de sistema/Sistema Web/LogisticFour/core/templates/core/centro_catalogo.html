{% extends "core/base.html" %}
{% load static %}

{% block content %}

<style>
  :root{
    --ink:#0f172a;
    --muted:#6b7280;
    --line:#e5e7eb;
    --card:#ffffff;
    --accent:#111827;
    --accent-soft:#eef2ff;
  }

  /* ===========================
     LAYOUT GENERAL
  ============================ */
  .catalog-page{
    width:100%;
    min-height:calc(100vh - 80px);
    padding:24px 0 40px;
    background:radial-gradient(circle at 0% 0%, #ffffff 0%, #eef2ff 55%, #e5edf7 100%);
    animation:catFade .3s ease-out both;
  }
  @keyframes catFade{
    from{opacity:0;transform:translateY(6px);}
    to{opacity:1;transform:none;}
  }

  .catalog-shell{
    max-width:1180px;
    margin:0 auto;
    padding:0 26px;
  }
  @media(max-width:768px){
    .catalog-shell{ padding:0 14px; }
  }

  .catalog-header{
    text-align:center;
    margin-bottom:26px;
  }
  .catalog-header h1{
    margin:0 0 4px;
    font-size:clamp(1.6rem,1.3rem + 0.8vw,2.1rem);
    font-weight:800;
    color:var(--ink);
  }
  .catalog-header p{
    margin:0;
    color:var(--muted);
    font-size:.9rem;
  }

  /* ===========================
     GRID DE CARDS
  ============================ */
  .catalog-grid{
    display:grid;
    grid-template-columns:repeat(auto-fit,minmax(260px,1fr));
    gap:22px;
    align-items:stretch;
  }

  .catalog-card{
    position:relative;
    background:var(--card);
    border-radius:22px;
    padding:22px 22px 18px;
    box-shadow:0 18px 45px rgba(15,23,42,0.06);
    display:flex;
    flex-direction:column;
    gap:12px;
    overflow:hidden;
    animation:cardIn .32s ease-out both;
  }
  .catalog-card:nth-child(1){animation-delay:.02s;}
  .catalog-card:nth-child(2){animation-delay:.06s;}
  .catalog-card:nth-child(3){animation-delay:.1s;}
  .catalog-card:nth-child(4){animation-delay:.14s;}

  @keyframes cardIn{
    from{opacity:0;transform:translateY(8px) scale(.99);}
    to{opacity:1;transform:translateY(0) scale(1);}
  }

  .catalog-card::before{
    content:"";
    position:absolute;
    inset:auto -40px 0 auto;
    height:70px;
    background:radial-gradient(circle at 100% 100%, rgba(15,23,42,.08), transparent 60%);
    opacity:.6;
    pointer-events:none;
  }

  .card-title-row{
    display:flex;
    align-items:center;
    gap:10px;
  }

  .card-icon{
    width:32px;
    height:32px;
    border-radius:999px;
    background:var(--accent-soft);
    display:flex;
    align-items:center;
    justify-content:center;
    font-size:1rem;
  }

  .catalog-card h4{
    margin:0;
    font-size:1.05rem;
    font-weight:700;
    color:var(--ink);
  }

  .catalog-card p.card-desc{
    margin:0;
    font-size:.86rem;
    color:var(--muted);
  }

  /* ===========================
     FORMULARIOS
  ============================ */
  .catalog-form{
    margin-top:4px;
    display:flex;
    flex-direction:column;
    gap:10px;
    flex:1 1 auto;
  }

  .cat-field{
    display:flex;
    flex-direction:column;
    gap:3px;
  }

  .cat-label{
    font-weight:600;
    font-size:.86rem;
    color:#111827;
  }

  .catalog-page input[type="text"],
  .catalog-page input[type="number"],
  .catalog-page input[type="email"],
  .catalog-page input[type="date"],
  .catalog-page select{
    width:100%;
    font-size:.88rem;
    border-radius:10px;
    border:1px solid #d1d5db;
    padding:0.45rem 0.7rem;
    background:#f9fafb;
    transition:border-color .16s ease, box-shadow .16s ease, background-color .16s ease;
  }

  .catalog-page input:focus,
  .catalog-page select:focus{
    outline:none;
    border-color:#2563eb;
    box-shadow:0 0 0 1px rgba(37,99,235,.3);
    background:#ffffff;
  }

  .cat-checkbox-row{
    display:flex;
    align-items:center;
    gap:8px;
    margin-top:4px;
  }
  .cat-checkbox-row input[type="checkbox"]{
    width:18px;
    height:18px;
    border-radius:6px;
  }

  .errorlist,
  .invalid-feedback{
    margin:0;
    padding:0;
    list-style:none;
    color:#b91c1c;
    font-size:.78rem;
  }

  /* ===========================
     BOTONES
  ============================ */
  .cat-btn{
    margin-top:auto;
    border-radius:999px;
    border:1px solid #020617;
    background:#020617;
    color:#ffffff;
    font-weight:600;
    font-size:.9rem;
    padding:.55rem 1.2rem;
    text-align:center;
    cursor:pointer;
    width:100%;
    transition:background .16s ease, transform .12s ease, box-shadow .16s ease;
  }
  .cat-btn:hover{
    background:#000000;
    box-shadow:0 10px 28px rgba(15,23,42,.20);
    transform:translateY(-1px);
  }
  .cat-btn:active{
    transform:translateY(0);
    box-shadow:0 4px 14px rgba(15,23,42,.18);
  }

  @media(max-width:768px){
    .catalog-card{
      padding:18px 16px 16px;
    }
  }
</style>


<div class="catalog-page">
  <div class="catalog-shell">

    <header class="catalog-header">
      <h1>Centro de Cat√°logo</h1>
      <p>Administra r√°pidamente las entidades base del sistema.</p>
    </header>

    <div class="catalog-grid">

      <!-- ‚ñ¢ Marca -->
      <section class="catalog-card">
        <div class="card-title-row">
          <div class="card-icon">üè∑Ô∏è</div>
          <div>
            <h4>Marca</h4>
            <p class="card-desc">Agrega nuevas marcas de productos.</p>
          </div>
        </div>

        <form method="post" class="catalog-form">
          {% csrf_token %}
          {{ marca_form.non_field_errors }}

          <div class="cat-field">
            <label class="cat-label" for="{{ marca_form.nombre.id_for_label }}">
              {{ marca_form.nombre.label }}
            </label>
            {{ marca_form.nombre }}
            {{ marca_form.nombre.errors }}
          </div>

          <button type="submit" name="submit_marca" class="cat-btn">
            Guardar Marca
          </button>
        </form>
      </section>

      <!-- ‚ñ¢ Unidad -->
      <section class="catalog-card">
        <div class="card-title-row">
          <div class="card-icon">üìè</div>
          <div>
            <h4>Unidad</h4>
            <p class="card-desc">Define nuevas unidades de medida.</p>
          </div>
        </div>

        <form method="post" class="catalog-form">
          {% csrf_token %}
          {{ unidad_form.non_field_errors }}

          <div class="cat-field">
            <label class="cat-label" for="{{ unidad_form.codigo.id_for_label }}">
              {{ unidad_form.codigo.label }}
            </label>
            {{ unidad_form.codigo }}
            {{ unidad_form.codigo.errors }}
          </div>

          <div class="cat-field">
            <label class="cat-label" for="{{ unidad_form.descripcion.id_for_label }}">
              {{ unidad_form.descripcion.label }}
            </label>
            {{ unidad_form.descripcion }}
            {{ unidad_form.descripcion.errors }}
          </div>

          <button type="submit" name="submit_unidad" class="cat-btn">
            Guardar Unidad
          </button>
        </form>
      </section>

      <!-- ‚ñ¢ Tasa -->
      <section class="catalog-card">
        <div class="card-title-row">
          <div class="card-icon">üí∞</div>
          <div>
            <h4>Tasa</h4>
            <p class="card-desc">Crea o actualiza impuestos aplicables.</p>
          </div>
        </div>

        <form method="post" class="catalog-form">
          {% csrf_token %}
          {{ tasa_form.non_field_errors }}

          <div class="cat-field">
            <label class="cat-label" for="{{ tasa_form.nombre.id_for_label }}">
              {{ tasa_form.nombre.label }}
            </label>
            {{ tasa_form.nombre }}
            {{ tasa_form.nombre.errors }}
          </div>

          <div class="cat-field">
            <label class="cat-label" for="{{ tasa_form.porcentaje.id_for_label }}">
              {{ tasa_form.porcentaje.label }}
            </label>
            {{ tasa_form.porcentaje }}
            {{ tasa_form.porcentaje.errors }}
          </div>

          <div class="cat-field">
            <span class="cat-label">{{ tasa_form.activo.label }}</span>
            <div class="cat-checkbox-row">
              {{ tasa_form.activo }}
              <span class="muted">Activo</span>
            </div>
            {{ tasa_form.activo.errors }}
          </div>

          <button type="submit" name="submit_tasa" class="cat-btn">
            Guardar Tasa
          </button>
        </form>
      </section>

      <!-- ‚ñ¢ Categor√≠a -->
      <section class="catalog-card">
        <div class="card-title-row">
          <div class="card-icon">üìÇ</div>
          <div>
            <h4>Categor√≠a</h4>
            <p class="card-desc">Organiza tus productos en categor√≠as.</p>
          </div>
        </div>

        <form method="post" class="catalog-form">
          {% csrf_token %}
          {{ categoria_form.non_field_errors }}

          <div class="cat-field">
            <label class="cat-label" for="{{ categoria_form.padre.id_for_label }}">
              {{ categoria_form.padre.label }}
            </label>
            {{ categoria_form.padre }}
            {{ categoria_form.padre.errors }}
          </div>

          <div class="cat-field">
            <label class="cat-label" for="{{ categoria_form.nombre.id_for_label }}">
              {{ categoria_form.nombre.label }}
            </label>
            {{ categoria_form.nombre }}
            {{ categoria_form.nombre.errors }}
          </div>

          <div class="cat-field">
            <label class="cat-label" for="{{ categoria_form.codigo.id_for_label }}">
              {{ categoria_form.codigo.label }}
            </label>
            {{ categoria_form.codigo }}
            {{ categoria_form.codigo.errors }}
          </div>

          <button type="submit" name="submit_categoria" class="cat-btn">
            Guardar Categor√≠a
          </button>
        </form>
      </section>

    </div><!-- /catalog-grid -->
  </div><!-- /catalog-shell -->
</div><!-- /catalog-page -->

{% endblock %}
